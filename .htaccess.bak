AuthType Basic
AuthName "Restricted Access"
AuthUserFile /home/doakst7/.htpasswds/public_html/passwd
Require valid-user

# Allow access to wp-admin/admin-ajax.php
<Files admin-ajax.php>
    Satisfy Any
    Allow from all
</Files>


#Begin Really Simple Security
<IfModule mod_rewrite.c>
RewriteEngine on
# Add the logging directives here
RewriteLog "/home/doakst7/logs/rewrite.log"
RewriteLogLevel 9

# Enable proxy logging
LogLevel warn proxy:trace5

RewriteCond %{HTTPS} !=on [NC]
RewriteCond %{REQUEST_URI} !^/\.well-known/acme-challenge/
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]
</IfModule>

#End Really Simple Security

#----------------------------------------------------------------cp:ppd
# Section managed by cPanel: Password Protected Directories     -cp:ppd
# - Do not edit this section of the htaccess file!              -cp:ppd
#----------------------------------------------------------------cp:ppd
AuthType Basic
AuthName "Protected 'public_html'"
AuthUserFile "/home/doakst7/.htpasswds/public_html/passwd"
Require valid-user
#----------------------------------------------------------------cp:ppd
# End section managed by cPanel: Password Protected Directories -cp:ppd
#----------------------------------------------------------------cp:ppd
# BEGIN WordPress
# The directives (lines) between "BEGIN WordPress" and "END WordPress" are
# dynamically generated, and should only be modified via WordPress filters.
# Any changes to the directives between these markers will be overwritten.
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

# COMMENTED OUT - Old API proxy
# RewriteEngine On
# RewriteRule ^api/(.*)$ http://198.46.85.193:8000/api/$1 [P,L]

# php -- BEGIN cPanel-generated handler, do not edit
# Set the "ea-php81" package as the default "PHP" programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit

# API proxy configuration
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # If the request starts with /api, proxy to our Python server
    RewriteCond %{REQUEST_URI} ^/api [NC]
    RewriteRule ^(.*)$ http://localhost:8088$1 [P,L]
</IfModule>